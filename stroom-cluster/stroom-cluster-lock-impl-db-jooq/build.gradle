ext.moduleName = 'stroom.cluster.lock.impl.db.jooq'

sourceSets {
    jooqCodeGen
}

dependencies {
    jooqCodeGenImplementation project(':stroom-jooq-codegen')

    implementation libs.jakarta_annotation_api
    implementation libs.jooq
}

def genJooqSourceDirs = []
// Add all of the library sources from the gwtSource source set defined above.
genJooqSourceDirs.addAll(sourceSets.jooqCodeGen.runtimeClasspath)
genJooqSourceDirs.addAll(sourceSets.main.resources.srcDirs)

task genJooq(type: JavaExec) {
    dependsOn ':stroom-jooq-codegen:build'
    classpath {
        genJooqSourceDirs
    }
    mainClass = "stroom.jooq.codegen.JooqGenerator"
    args = [
            '-schema', 'cluster_lock',
            '-flywayLocations', 'stroom/cluster/lock/impl/db/migration',
            '-flywayTable', 'cluster_lock_schema_history'
    ]
}
