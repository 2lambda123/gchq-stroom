/*
 * Copyright 2016 Crown Copyright
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

----------------------------------------
-- Dashboards
----------------------------------------

-- Dashboard
create table DASH (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), NAME varchar(255) not null, UUID varchar(255) not null, DAT clob(2147483647), FK_FOLDER_ID INT, primary key (ID));
alter table DASH add constraint UK_a4fb6hjjff2eer6vmmiphbebo  unique (FK_FOLDER_ID, NAME);
alter table DASH add constraint UK_DASH_UUID unique (UUID);
alter table DASH add constraint FK_jsaq9j21uoryh52amhtkvxajy foreign key (FK_FOLDER_ID) references FOLDER;

-- Resource
create table RES (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), DAT clob(2147483647), primary key (ID));

-- Script
create table SCRIPT (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), NAME varchar(255) not null, UUID varchar(255) not null, DEP clob(255), DESCRIP clob(255), FK_FOLDER_ID INT, FK_RES_ID INT, primary key (ID));
alter table SCRIPT add constraint UK_b6dp8ggjkoy9jx00au7j6jokv  unique (FK_FOLDER_ID, NAME);
alter table SCRIPT add constraint UK_SCRIPT_UUID unique (UUID);
alter table SCRIPT add constraint FK_1yrk5u1c0fqpsm17da10pwlo6 foreign key (FK_FOLDER_ID) references FOLDER;
alter table SCRIPT add constraint FK_t3noi0rrqclagj3sprmd06jnk foreign key (FK_RES_ID) references RES;

-- Vis
create table VIS (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), NAME varchar(255) not null, UUID varchar(255) not null, DESCRIP clob(255), FUNC_NAME varchar(255), SCRIPT clob(255), SETTINGS clob(2147483647), FK_FOLDER_ID INT, primary key (ID));
alter table VIS add constraint UK_mxmcltd9b9u60sy61x0220oa6  unique (FK_FOLDER_ID, NAME);
alter table VIS add constraint UK_VIS_UUID unique (UUID);
alter table VIS add constraint FK_765muc2ih6348sw25xbj3qigh foreign key (FK_FOLDER_ID) references FOLDER;

-- Dictionary
create table DICT (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), NAME varchar(255) not null, UUID varchar(255) not null, DAT clob(2147483647), FK_FOLDER_ID INT, primary key (ID));
alter table DICT add constraint UK_78vpnss3wq3hmhnh1epdxl906  unique (FK_FOLDER_ID, NAME);
alter table DICT add constraint UK_DICT_UUID unique (UUID);
alter table DICT add constraint FK_dvk7s9s4f8hli32j89uk7j8tt foreign key (FK_FOLDER_ID) references FOLDER;

-- Query
create table QUERY (ID INT generated by default as identity (start with 1), VER TINYINT not null, CRT_DT TIMESTAMP not null, CRT_USER varchar(255), UPD_DT TIMESTAMP not null, UPD_USER varchar(255), NAME varchar(255) not null, UUID varchar(255) not null, DAT clob(2147483647), FAVOURITE boolean not null, FK_FOLDER_ID INT, FK_DASH_ID INT, primary key (ID));
alter table QUERY add constraint FK_i4qxofnigx694jtyla7clrayg foreign key (FK_FOLDER_ID) references FOLDER;
alter table QUERY add constraint UK_QUERY_UUID unique (UUID);
alter table QUERY add constraint FK_mqjj1xf1bpvpwm134mj2135nu foreign key (FK_DASH_ID) references DASH;