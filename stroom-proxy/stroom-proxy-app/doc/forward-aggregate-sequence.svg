<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1254px" preserveAspectRatio="none" style="width:1313px;height:1254px;background:#FFFFFF;" version="1.1" viewBox="0 0 1313 1254" width="1313px" zoomAndPan="magnify"><defs/><g><rect height="29.0679" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="211" x="552.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="201" x="557.75" y="29.9659">Aggregate and Forward Data</text><rect fill="#FFFFFF" height="223.5301" style="stroke:#181818;stroke-width:1.0;" width="10" x="235.5" y="197.5479"/><rect fill="#FFFFFF" height="151.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="240.5" y="242.2539"/><rect fill="#FFFFFF" height="204.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="379.5" y="467.784"/><rect fill="#FFFFFF" height="133.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="384.5" y="512.49"/><rect fill="#FFFFFF" height="442.7662" style="stroke:#181818;stroke-width:1.0;" width="10" x="528.5" y="719.314"/><rect fill="#FFFFFF" height="183.5301" style="stroke:#181818;stroke-width:1.0;" width="10" x="533.5" y="764.0201"/><rect fill="#FFFFFF" height="151.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="533.5" y="994.2562"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="240" x2="240" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="384" x2="384" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="533.5" x2="533.5" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="886.5" x2="886.5" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="932.5" x2="932.5" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1050.5" x2="1050.5" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1184.5" x2="1184.5" y1="124.1358" y2="1171.0802"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1270.5" x2="1270.5" y1="124.1358" y2="1171.0802"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="12" y="112.0339">ProxyRepoSources</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="5" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="12" y="1192.0462">ProxyRepoSources</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="152" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="159" y="112.0339">ProxyRepoSourceEntries</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="152" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="159" y="1192.0462">ProxyRepoSourceEntries</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="339" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="346" y="112.0339">Aggregator</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91" x="339" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="346" y="1192.0462">Aggregator</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="456.5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="463.5" y="112.0339">AggregateForwarder</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="456.5" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="463.5" y="1192.0462">AggregateForwarder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="874.5" y="120.0339">db</text><path d="M868.5,69.0679 C868.5,59.0679 886.5,59.0679 886.5,59.0679 C886.5,59.0679 904.5,59.0679 904.5,69.0679 L904.5,95.0679 C904.5,105.0679 886.5,105.0679 886.5,105.0679 C886.5,105.0679 868.5,105.0679 868.5,95.0679 L868.5,69.0679 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M868.5,69.0679 C868.5,79.0679 886.5,79.0679 886.5,79.0679 C886.5,79.0679 904.5,79.0679 904.5,69.0679 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="874.5" y="1185.0462">db</text><path d="M868.5,1199.1481 C868.5,1189.1481 886.5,1189.1481 886.5,1189.1481 C886.5,1189.1481 904.5,1189.1481 904.5,1199.1481 L904.5,1225.1481 C904.5,1235.1481 886.5,1235.1481 886.5,1235.1481 C886.5,1235.1481 868.5,1235.1481 868.5,1225.1481 L868.5,1199.1481 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M868.5,1199.1481 C868.5,1209.1481 886.5,1209.1481 886.5,1209.1481 C886.5,1209.1481 904.5,1209.1481 904.5,1199.1481 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="914.5" y="120.0339">repo</text><path d="M915,69.0679 C915,59.0679 933,59.0679 933,59.0679 C933,59.0679 951,59.0679 951,69.0679 L951,95.0679 C951,105.0679 933,105.0679 933,105.0679 C933,105.0679 915,105.0679 915,95.0679 L915,69.0679 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M915,69.0679 C915,79.0679 933,79.0679 933,79.0679 C933,79.0679 951,79.0679 951,69.0679 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="914.5" y="1185.0462">repo</text><path d="M915,1199.1481 C915,1189.1481 933,1189.1481 933,1189.1481 C933,1189.1481 951,1189.1481 951,1199.1481 L951,1225.1481 C951,1235.1481 933,1235.1481 933,1235.1481 C933,1235.1481 915,1235.1481 915,1225.1481 L915,1199.1481 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M915,1199.1481 C915,1209.1481 933,1209.1481 933,1209.1481 C933,1209.1481 951,1209.1481 951,1199.1481 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178" x="961.5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="968.5" y="112.0339">ForwardStreamHandlers</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178" x="961.5" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="968.5" y="1192.0462">ForwardStreamHandlers</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1149.5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1156.5" y="112.0339">Cleanup</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1149.5" y="1170.0802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1156.5" y="1192.0462">Cleanup</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1229.5" y="120.0339">Destination</text><ellipse cx="1271" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1271,61.5679 L1271,88.5679 M1258,69.5679 L1284,69.5679 M1271,88.5679 L1258,103.5679 M1271,88.5679 L1284,103.5679 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1229.5" y="1185.0462">Destination</text><ellipse cx="1271" cy="1197.6481" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1271,1205.6481 L1271,1232.6481 M1258,1213.6481 L1284,1213.6481 M1271,1232.6481 L1258,1247.6481 M1271,1232.6481 L1284,1247.6481 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFFFFF" height="223.5301" style="stroke:#181818;stroke-width:1.0;" width="10" x="235.5" y="197.5479"/><rect fill="#FFFFFF" height="151.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="240.5" y="242.2539"/><rect fill="#FFFFFF" height="204.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="379.5" y="467.784"/><rect fill="#FFFFFF" height="133.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="384.5" y="512.49"/><rect fill="#FFFFFF" height="442.7662" style="stroke:#181818;stroke-width:1.0;" width="10" x="528.5" y="719.314"/><rect fill="#FFFFFF" height="183.5301" style="stroke:#181818;stroke-width:1.0;" width="10" x="533.5" y="764.0201"/><rect fill="#FFFFFF" height="151.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="533.5" y="994.2562"/><line style="stroke:#181818;stroke-width:1.0;" x1="238.5" x2="228.5" y1="157.8419" y2="161.8419"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73.5" x2="239.5" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="80.5" y="152.0328">onChange</text><line style="stroke:#181818;stroke-width:1.0;" x1="240.5" x2="287.5" y1="184.5479" y2="184.5479"/><line style="stroke:#181818;stroke-width:1.0;" x1="287.5" x2="287.5" y1="184.5479" y2="197.5479"/><line style="stroke:#181818;stroke-width:1.0;" x1="246.5" x2="287.5" y1="197.5479" y2="197.5479"/><polygon fill="#181818" points="256.5,193.5479,246.5,197.5479,256.5,201.5479,252.5,197.5479" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="252.5" y="178.7389">examine</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="245.5" x2="292.5" y1="229.2539" y2="229.2539"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="292.5" x2="292.5" y1="229.2539" y2="242.2539"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="251.5" x2="292.5" y1="242.2539" y2="242.2539"/><line style="stroke:#181818;stroke-width:1.0;" x1="251.5" x2="261.5" y1="242.2539" y2="246.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="257.5" y="223.4449">examineSource</text><polygon fill="#181818" points="874.5,274.9599,884.5,278.9599,874.5,282.9599,878.5,278.9599" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="250.5" x2="880.5" y1="278.9599" y2="278.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="257.5" y="273.1509">add source items</text><polygon fill="#181818" points="874.5,306.6659,884.5,310.6659,874.5,314.6659,878.5,310.6659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="250.5" x2="880.5" y1="310.6659" y2="310.6659"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="257.5" y="304.8569">add source entries</text><polygon fill="#181818" points="874.5,338.3719,884.5,342.3719,874.5,346.3719,878.5,342.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="250.5" x2="880.5" y1="342.3719" y2="342.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="257.5" y="336.5629">mark source as examined</text><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="372.5" y1="374.0779" y2="378.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250.5" x2="383.5" y1="374.0779" y2="374.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="257.5" y="368.2689">onChange</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250.5" x2="292.5" y1="393.0779" y2="393.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="292.5" x2="292.5" y1="393.0779" y2="406.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="245.5" x2="292.5" y1="406.0779" y2="406.0779"/><line style="stroke:#181818;stroke-width:1.0;" x1="245.5" x2="255.5" y1="406.0779" y2="410.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="245.5" x2="287.5" y1="420.0779" y2="420.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="287.5" x2="287.5" y1="420.0779" y2="433.0779"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="240.5" x2="287.5" y1="433.0779" y2="433.0779"/><polygon fill="#181818" points="250.5,429.0779,240.5,433.0779,250.5,437.0779,246.5,433.0779" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="384.5" x2="431.5" y1="454.784" y2="454.784"/><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="431.5" y1="454.784" y2="467.784"/><line style="stroke:#181818;stroke-width:1.0;" x1="390.5" x2="431.5" y1="467.784" y2="467.784"/><polygon fill="#181818" points="400.5,463.784,390.5,467.784,400.5,471.784,396.5,467.784" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="396.5" y="448.975">aggregate</text><line style="stroke:#181818;stroke-width:1.0;" x1="389.5" x2="436.5" y1="499.49" y2="499.49"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="436.5" y1="499.49" y2="512.49"/><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="436.5" y1="512.49" y2="512.49"/><polygon fill="#181818" points="405.5,508.49,395.5,512.49,405.5,516.49,401.5,512.49" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="401.5" y="493.681">add source item</text><polygon fill="#181818" points="874.5,545.196,884.5,549.196,874.5,553.196,878.5,549.196" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="394.5" x2="880.5" y1="549.196" y2="549.196"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="401.5" y="543.387">mark source_item as aggregated</text><line style="stroke:#181818;stroke-width:1.0;" x1="394.5" x2="436.5" y1="580.902" y2="580.902"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="436.5" y1="580.902" y2="593.902"/><line style="stroke:#181818;stroke-width:1.0;" x1="395.5" x2="436.5" y1="593.902" y2="593.902"/><polygon fill="#181818" points="405.5,589.902,395.5,593.902,405.5,597.902,401.5,593.902" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="401.5" y="575.093">closeOldAggregates</text><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="521.5" y1="625.608" y2="629.608"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="394.5" x2="532.5" y1="625.608" y2="625.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="401.5" y="619.799">onChange</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="394.5" x2="436.5" y1="644.608" y2="644.608"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="436.5" x2="436.5" y1="644.608" y2="657.608"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="389.5" x2="436.5" y1="657.608" y2="657.608"/><polygon fill="#181818" points="399.5,653.608,389.5,657.608,399.5,661.608,395.5,657.608" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="389.5" x2="431.5" y1="671.608" y2="671.608"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="431.5" x2="431.5" y1="671.608" y2="684.608"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="384.5" x2="431.5" y1="684.608" y2="684.608"/><polygon fill="#181818" points="394.5,680.608,384.5,684.608,394.5,688.608,390.5,684.608" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533.5" x2="580.5" y1="706.314" y2="706.314"/><line style="stroke:#181818;stroke-width:1.0;" x1="580.5" x2="580.5" y1="706.314" y2="719.314"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.5" x2="580.5" y1="719.314" y2="719.314"/><line style="stroke:#181818;stroke-width:1.0;" x1="539.5" x2="549.5" y1="719.314" y2="723.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="545.5" y="700.505">forward</text><line style="stroke:#181818;stroke-width:1.0;" x1="538.5" x2="585.5" y1="751.0201" y2="751.0201"/><line style="stroke:#181818;stroke-width:1.0;" x1="585.5" x2="585.5" y1="751.0201" y2="764.0201"/><line style="stroke:#181818;stroke-width:1.0;" x1="544.5" x2="585.5" y1="764.0201" y2="764.0201"/><line style="stroke:#181818;stroke-width:1.0;" x1="544.5" x2="554.5" y1="764.0201" y2="768.0201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="550.5" y="745.2111">forwardAggregate</text><polygon fill="#181818" points="921,796.7261,931,800.7261,921,804.7261,925,800.7261" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="927" y1="800.7261" y2="800.7261"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="550.5" y="794.9171">read</text><polygon fill="#181818" points="1038.5,828.4321,1048.5,832.4321,1038.5,836.4321,1042.5,832.4321" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="1044.5" y1="832.4321" y2="832.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="550.5" y="826.6231">write</text><polygon fill="#181818" points="1259,860.1381,1269,864.1381,1259,868.1381,1263,864.1381" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1050.5" x2="1265" y1="864.1381" y2="864.1381"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1057.5" y="858.3291">handle</text><polygon fill="#181818" points="874.5,891.8441,884.5,895.8441,874.5,899.8441,878.5,895.8441" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="880.5" y1="895.8441" y2="895.8441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="550.5" y="890.0351">record 'forward_aggregate'</text><polygon fill="#181818" points="874.5,923.5501,884.5,927.5501,874.5,931.5501,878.5,927.5501" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="880.5" y1="927.5501" y2="927.5501"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="550.5" y="921.7411">record 'aggregate' forwarded</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="543.5" x2="585.5" y1="946.5501" y2="946.5501"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="585.5" x2="585.5" y1="946.5501" y2="959.5501"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="538.5" x2="585.5" y1="959.5501" y2="959.5501"/><line style="stroke:#181818;stroke-width:1.0;" x1="538.5" x2="548.5" y1="959.5501" y2="963.5501"/><line style="stroke:#181818;stroke-width:1.0;" x1="538.5" x2="585.5" y1="981.2562" y2="981.2562"/><line style="stroke:#181818;stroke-width:1.0;" x1="585.5" x2="585.5" y1="981.2562" y2="994.2562"/><line style="stroke:#181818;stroke-width:1.0;" x1="544.5" x2="585.5" y1="994.2562" y2="994.2562"/><polygon fill="#181818" points="554.5,990.2562,544.5,994.2562,554.5,998.2562,550.5,994.2562" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="550.5" y="975.4472">deleteAggregate</text><polygon fill="#181818" points="874.5,1026.9622,884.5,1030.9622,874.5,1034.9622,878.5,1030.9622" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="880.5" y1="1030.9622" y2="1030.9622"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="550.5" y="1025.1532">delete 'forward_aggregate' for complete aggregate id</text><polygon fill="#181818" points="874.5,1058.6682,884.5,1062.6682,874.5,1066.6682,878.5,1062.6682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="880.5" y1="1062.6682" y2="1062.6682"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="550.5" y="1056.8592">delete 'aggregate_item' for complete aggregate id</text><polygon fill="#181818" points="874.5,1090.3742,884.5,1094.3742,874.5,1098.3742,878.5,1094.3742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="543.5" x2="880.5" y1="1094.3742" y2="1094.3742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="550.5" y="1088.5652">delete 'aggregate' for complete aggregate id</text><line style="stroke:#181818;stroke-width:1.0;" x1="1182.5" x2="1172.5" y1="1126.0802" y2="1130.0802"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="543.5" x2="1183.5" y1="1126.0802" y2="1126.0802"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="550.5" y="1120.2712">onChange</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="543.5" x2="585.5" y1="1145.0802" y2="1145.0802"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="585.5" x2="585.5" y1="1145.0802" y2="1158.0802"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="538.5" x2="585.5" y1="1158.0802" y2="1158.0802"/><polygon fill="#181818" points="548.5,1154.0802,538.5,1158.0802,548.5,1162.0802,544.5,1158.0802" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[17f31b5fa80b915a7e27548494240950]
@startuml

title Aggregate and Forward Data

participant ProxyRepoSources
participant ProxyRepoSourceEntries
participant Aggregator
participant AggregateForwarder
database db
database repo
participant ForwardStreamHandlers
participant Cleanup
actor Destination

ProxyRepoSources - -// ProxyRepoSourceEntries: onChange
ProxyRepoSourceEntries -> ProxyRepoSourceEntries++: examine
ProxyRepoSourceEntries - -// ProxyRepoSourceEntries++: examineSource
ProxyRepoSourceEntries -> db: add source items
ProxyRepoSourceEntries -> db: add source entries
ProxyRepoSourceEntries -> db: mark source as examined

ProxyRepoSourceEntries - -// Aggregator: onChange

return
return

Aggregator -> Aggregator++: aggregate
Aggregator -> Aggregator++: add source item
Aggregator -> db: mark source_item as aggregated
Aggregator -> Aggregator: closeOldAggregates
Aggregator - -// AggregateForwarder: onChange

return
return

AggregateForwarder -// AggregateForwarder++: forward
AggregateForwarder -// AggregateForwarder++: forwardAggregate
AggregateForwarder -> repo: read
AggregateForwarder -> ForwardStreamHandlers: write
ForwardStreamHandlers - -> Destination: handle
AggregateForwarder -> db: record 'forward_aggregate'

AggregateForwarder -> db: record 'aggregate' forwarded
return

AggregateForwarder -> AggregateForwarder++: deleteAggregate
AggregateForwarder -> db: delete 'forward_aggregate' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate_item' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate' for complete aggregate id
AggregateForwarder - -// Cleanup: onChange
return

@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>