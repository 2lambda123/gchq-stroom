<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1192px" preserveAspectRatio="none" style="width:1275px;height:1192px;" version="1.1" viewBox="0 0 1275 1192" width="1275px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o8i8rfuta1hz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="236" x="521.5" y="28.708">Aggregate and Forward Data</text><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="210.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="231" y="191.5156"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="236" y="233.6484"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="194.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="370" y="446.3125"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="125.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375" y="488.4453"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="414.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="515" y="684.9766"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="170.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="520" y="727.1094"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="520" y="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="72" x2="72" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="236" x2="236" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="375" x2="375" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="520" x2="520" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="861" x2="861" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="907" x2="907" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1020" x2="1020" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1149" x2="1149" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1234" x2="1234" y1="123.25" y2="1108.4375"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="12" y="107.9482">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="5" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="12" y="1127.4326">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="168" x="150" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="157" y="107.9482">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="168" x="150" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="157" y="1127.4326">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="332" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="339" y="107.9482">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="332" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="339" y="1127.4326">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="140" x="448" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="455" y="107.9482">AggregateForwarder</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="140" x="448" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="455" y="1127.4326">AggregateForwarder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="850" y="119.9482">db</text><path d="M843,70.9531 C843,60.9531 861,60.9531 861,60.9531 C861,60.9531 879,60.9531 879,70.9531 L879,96.9531 C879,106.9531 861,106.9531 861,106.9531 C861,106.9531 843,106.9531 843,96.9531 L843,70.9531 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M843,70.9531 C843,80.9531 861,80.9531 861,80.9531 C861,80.9531 879,80.9531 879,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="850" y="1120.4326">db</text><path d="M843,1133.7344 C843,1123.7344 861,1123.7344 861,1123.7344 C861,1123.7344 879,1123.7344 879,1133.7344 L879,1159.7344 C879,1169.7344 861,1169.7344 861,1169.7344 C861,1169.7344 843,1169.7344 843,1159.7344 L843,1133.7344 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M843,1133.7344 C843,1143.7344 861,1143.7344 861,1143.7344 C861,1143.7344 879,1143.7344 879,1133.7344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="889.5" y="119.9482">repo</text><path d="M889,70.9531 C889,60.9531 907,60.9531 907,60.9531 C907,60.9531 925,60.9531 925,70.9531 L925,96.9531 C925,106.9531 907,106.9531 907,106.9531 C907,106.9531 889,106.9531 889,96.9531 L889,70.9531 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M889,70.9531 C889,80.9531 907,80.9531 907,80.9531 C907,80.9531 925,80.9531 925,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="889.5" y="1120.4326">repo</text><path d="M889,1133.7344 C889,1123.7344 907,1123.7344 907,1123.7344 C907,1123.7344 925,1123.7344 925,1133.7344 L925,1159.7344 C925,1169.7344 907,1169.7344 907,1169.7344 C907,1169.7344 889,1169.7344 889,1159.7344 L889,1133.7344 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M889,1133.7344 C889,1143.7344 907,1143.7344 907,1143.7344 C907,1143.7344 925,1143.7344 925,1133.7344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="935" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="942" y="107.9482">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="166" x="935" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="942" y="1127.4326">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="65" x="1115" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="1122" y="107.9482">Cleanup</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="65" x="1115" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="1122" y="1127.4326">Cleanup</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1194" y="119.9482">Destination</text><ellipse cx="1234" cy="49.9531" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1234,57.9531 L1234,84.9531 M1221,65.9531 L1247,65.9531 M1234,84.9531 L1221,99.9531 M1234,84.9531 L1247,99.9531 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1194" y="1120.4326">Destination</text><ellipse cx="1234" cy="1133.7344" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1234,1141.7344 L1234,1168.7344 M1221,1149.7344 L1247,1149.7344 M1234,1168.7344 L1221,1183.7344 M1234,1168.7344 L1247,1183.7344 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="210.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="231" y="191.5156"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="236" y="233.6484"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="194.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="370" y="446.3125"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="125.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375" y="488.4453"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="414.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="515" y="684.9766"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="170.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="520" y="727.1094"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="520" y="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="234" x2="224" y1="154.3828" y2="158.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72.5" x2="235" y1="154.3828" y2="154.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="79.5" y="149.3169">onChange</text><line style="stroke:#A80036;stroke-width:1.0;" x1="236" x2="283" y1="178.5156" y2="178.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283" x2="283" y1="178.5156" y2="191.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="283" y1="191.5156" y2="191.5156"/><polygon fill="#A80036" points="252,187.5156,242,191.5156,252,195.5156,248,191.5156" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="248" y="173.4497">examine</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241" x2="288" y1="220.6484" y2="220.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="288" x2="288" y1="220.6484" y2="233.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="247" x2="288" y1="233.6484" y2="233.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="247" x2="257" y1="233.6484" y2="237.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="253" y="215.5825">examineSource</text><polygon fill="#A80036" points="849,263.7813,859,267.7813,849,271.7813,853,267.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="246" x2="855" y1="267.7813" y2="267.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="253" y="262.7153">add source items</text><polygon fill="#A80036" points="849,292.9141,859,296.9141,849,300.9141,853,296.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="246" x2="855" y1="296.9141" y2="296.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="253" y="291.8481">add source entries</text><polygon fill="#A80036" points="849,322.0469,859,326.0469,849,330.0469,853,326.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="246" x2="855" y1="326.0469" y2="326.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="253" y="320.981">mark source as examined</text><line style="stroke:#A80036;stroke-width:1.0;" x1="373" x2="363" y1="355.1797" y2="359.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246" x2="374" y1="355.1797" y2="355.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="253" y="350.1138">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246" x2="288" y1="374.1797" y2="374.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="288" x2="288" y1="374.1797" y2="387.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241" x2="288" y1="387.1797" y2="387.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241" x2="251" y1="387.1797" y2="391.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241" x2="283" y1="401.1797" y2="401.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283" x2="283" y1="401.1797" y2="414.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="236" x2="283" y1="414.1797" y2="414.1797"/><polygon fill="#A80036" points="246,410.1797,236,414.1797,246,418.1797,242,414.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="375" x2="422" y1="433.3125" y2="433.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="422" x2="422" y1="433.3125" y2="446.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="381" x2="422" y1="446.3125" y2="446.3125"/><polygon fill="#A80036" points="391,442.3125,381,446.3125,391,450.3125,387,446.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="387" y="428.2466">aggregate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="380" x2="427" y1="475.4453" y2="475.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="475.4453" y2="488.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="488.4453" y2="488.4453"/><polygon fill="#A80036" points="396,484.4453,386,488.4453,396,492.4453,392,488.4453" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="392" y="470.3794">add source item</text><polygon fill="#A80036" points="849,518.5781,859,522.5781,849,526.5781,853,522.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="855" y1="522.5781" y2="522.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="392" y="517.5122">mark source_item as aggregated</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="551.7109" y2="551.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="551.7109" y2="564.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="564.7109" y2="564.7109"/><polygon fill="#A80036" points="396,560.7109,386,564.7109,396,568.7109,392,564.7109" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="392" y="546.645">closeOldAggregates</text><line style="stroke:#A80036;stroke-width:1.0;" x1="518" x2="508" y1="593.8438" y2="597.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="385" x2="519" y1="593.8438" y2="593.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="392" y="588.7778">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="385" x2="427" y1="612.8438" y2="612.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="427" x2="427" y1="612.8438" y2="625.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="380" x2="427" y1="625.8438" y2="625.8438"/><polygon fill="#A80036" points="390,621.8438,380,625.8438,390,629.8438,386,625.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="380" x2="422" y1="639.8438" y2="639.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="422" x2="422" y1="639.8438" y2="652.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="375" x2="422" y1="652.8438" y2="652.8438"/><polygon fill="#A80036" points="385,648.8438,375,652.8438,385,656.8438,381,652.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="520" x2="567" y1="671.9766" y2="671.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="567" x2="567" y1="671.9766" y2="684.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="526" x2="567" y1="684.9766" y2="684.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="526" x2="536" y1="684.9766" y2="688.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="532" y="666.9106">forward</text><line style="stroke:#A80036;stroke-width:1.0;" x1="525" x2="572" y1="714.1094" y2="714.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="572" x2="572" y1="714.1094" y2="727.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="531" x2="572" y1="727.1094" y2="727.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="531" x2="541" y1="727.1094" y2="731.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="537" y="709.0435">forwardAggregate</text><polygon fill="#A80036" points="895,757.2422,905,761.2422,895,765.2422,899,761.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="901" y1="761.2422" y2="761.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="537" y="756.1763">read</text><polygon fill="#A80036" points="1008,786.375,1018,790.375,1008,794.375,1012,790.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="1014" y1="790.375" y2="790.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="537" y="785.3091">write</text><polygon fill="#A80036" points="1222,815.5078,1232,819.5078,1222,823.5078,1226,819.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1020" x2="1228" y1="819.5078" y2="819.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1027" y="814.4419">handle</text><polygon fill="#A80036" points="849,844.6406,859,848.6406,849,852.6406,853,848.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="855" y1="848.6406" y2="848.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="537" y="843.5747">record 'forward_aggregate'</text><polygon fill="#A80036" points="849,873.7734,859,877.7734,849,881.7734,853,877.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="855" y1="877.7734" y2="877.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="537" y="872.7075">record 'aggregate' forwarded</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="530" x2="572" y1="896.7734" y2="896.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572" x2="572" y1="896.7734" y2="909.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="572" y1="909.7734" y2="909.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="525" x2="535" y1="909.7734" y2="913.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="525" x2="572" y1="928.9063" y2="928.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="572" x2="572" y1="928.9063" y2="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="531" x2="572" y1="941.9063" y2="941.9063"/><polygon fill="#A80036" points="541,937.9063,531,941.9063,541,945.9063,537,941.9063" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="537" y="923.8403">deleteAggregate</text><polygon fill="#A80036" points="849,972.0391,859,976.0391,849,980.0391,853,976.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="855" y1="976.0391" y2="976.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="537" y="970.9731">delete 'forward_aggregate' for complete aggregate id</text><polygon fill="#A80036" points="849,1001.1719,859,1005.1719,849,1009.1719,853,1005.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="855" y1="1005.1719" y2="1005.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="537" y="1000.106">delete 'aggregate_item' for complete aggregate id</text><polygon fill="#A80036" points="849,1030.3047,859,1034.3047,849,1038.3047,853,1034.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="530" x2="855" y1="1034.3047" y2="1034.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="537" y="1029.2388">delete 'aggregate' for complete aggregate id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1147.5" x2="1137.5" y1="1063.4375" y2="1067.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="530" x2="1148.5" y1="1063.4375" y2="1063.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="537" y="1058.3716">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="530" x2="572" y1="1082.4375" y2="1082.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572" x2="572" y1="1082.4375" y2="1095.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="572" y1="1095.4375" y2="1095.4375"/><polygon fill="#A80036" points="535,1091.4375,525,1095.4375,535,1099.4375,531,1095.4375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f432e6defdb12a47b0247bf43665bdfa]
@startuml

title Aggregate and Forward Data

participant ProxyRepoSources
participant ProxyRepoSourceEntries
participant Aggregator
participant AggregateForwarder
database db
database repo
participant ForwardStreamHandlers
participant Cleanup
actor Destination

ProxyRepoSources - -// ProxyRepoSourceEntries: onChange
ProxyRepoSourceEntries -> ProxyRepoSourceEntries++: examine
ProxyRepoSourceEntries - -// ProxyRepoSourceEntries++: examineSource
ProxyRepoSourceEntries -> db: add source items
ProxyRepoSourceEntries -> db: add source entries
ProxyRepoSourceEntries -> db: mark source as examined

ProxyRepoSourceEntries - -// Aggregator: onChange

return
return

Aggregator -> Aggregator++: aggregate
Aggregator -> Aggregator++: add source item
Aggregator -> db: mark source_item as aggregated
Aggregator -> Aggregator: closeOldAggregates
Aggregator - -// AggregateForwarder: onChange

return
return

AggregateForwarder -// AggregateForwarder++: forward
AggregateForwarder -// AggregateForwarder++: forwardAggregate
AggregateForwarder -> repo: read
AggregateForwarder -> ForwardStreamHandlers: write
ForwardStreamHandlers - -> Destination: handle
AggregateForwarder -> db: record 'forward_aggregate'

AggregateForwarder -> db: record 'aggregate' forwarded
return

AggregateForwarder -> AggregateForwarder++: deleteAggregate
AggregateForwarder -> db: delete 'forward_aggregate' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate_item' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate' for complete aggregate id
AggregateForwarder - -// Cleanup: onChange
return

@enduml

PlantUML version 1.2021.5(Sun Apr 25 11:20:28 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>