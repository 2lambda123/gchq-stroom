<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1263px" preserveAspectRatio="none" style="width:1331px;height:1263px;background:#FFFFFF;" version="1.1" viewBox="0 0 1331 1263" width="1331px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o8i8rfuta1hz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="245" x="545.25" y="31.2419">Aggregate and Forward Data</text><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="223.5301" style="stroke:#A80036;stroke-width:1.0;" width="10" x="241.5" y="202.9958"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="151.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="246.5" y="247.7018"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="204.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="389.5" y="473.2319"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="133.118" style="stroke:#A80036;stroke-width:1.0;" width="10" x="394.5" y="517.9379"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="442.7662" style="stroke:#A80036;stroke-width:1.0;" width="10" x="538.5" y="724.762"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="183.5301" style="stroke:#A80036;stroke-width:1.0;" width="10" x="543.5" y="769.468"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="151.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="543.5" y="999.7041"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="75" x2="75" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="246" x2="246" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="394" x2="394" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="543.5" x2="543.5" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="896.5" x2="896.5" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="942.5" x2="942.5" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1062.5" x2="1062.5" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1200.5" x2="1200.5" y1="129.5838" y2="1176.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1288.5" x2="1288.5" y1="129.5838" y2="1176.5282"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="137" x="5" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="12" y="113.4818">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="137" x="5" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="12" y="1197.4941">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="177" x="156" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="163" y="113.4818">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="177" x="156" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="163" y="1197.4941">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="91" x="347" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="354" y="113.4818">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="91" x="347" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="354" y="1197.4941">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="154" x="464.5" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="471.5" y="113.4818">AggregateForwarder</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="154" x="464.5" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="471.5" y="1197.4941">AggregateForwarder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="884.5" y="125.4818">db</text><path d="M878.5,74.5158 C878.5,64.5158 896.5,64.5158 896.5,64.5158 C896.5,64.5158 914.5,64.5158 914.5,74.5158 L914.5,100.5158 C914.5,110.5158 896.5,110.5158 896.5,110.5158 C896.5,110.5158 878.5,110.5158 878.5,100.5158 L878.5,74.5158 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M878.5,74.5158 C878.5,84.5158 896.5,84.5158 896.5,84.5158 C896.5,84.5158 914.5,84.5158 914.5,74.5158 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="884.5" y="1190.4941">db</text><path d="M878.5,1204.5961 C878.5,1194.5961 896.5,1194.5961 896.5,1194.5961 C896.5,1194.5961 914.5,1194.5961 914.5,1204.5961 L914.5,1230.5961 C914.5,1240.5961 896.5,1240.5961 896.5,1240.5961 C896.5,1240.5961 878.5,1240.5961 878.5,1230.5961 L878.5,1204.5961 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M878.5,1204.5961 C878.5,1214.5961 896.5,1214.5961 896.5,1214.5961 C896.5,1214.5961 914.5,1214.5961 914.5,1204.5961 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="924.5" y="125.4818">repo</text><path d="M925,74.5158 C925,64.5158 943,64.5158 943,64.5158 C943,64.5158 961,64.5158 961,74.5158 L961,100.5158 C961,110.5158 943,110.5158 943,110.5158 C943,110.5158 925,110.5158 925,100.5158 L925,74.5158 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M925,74.5158 C925,84.5158 943,84.5158 943,84.5158 C943,84.5158 961,84.5158 961,74.5158 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="924.5" y="1190.4941">repo</text><path d="M925,1204.5961 C925,1194.5961 943,1194.5961 943,1194.5961 C943,1194.5961 961,1194.5961 961,1204.5961 L961,1230.5961 C961,1240.5961 943,1240.5961 943,1240.5961 C943,1240.5961 925,1240.5961 925,1230.5961 L925,1204.5961 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M925,1204.5961 C925,1214.5961 943,1214.5961 943,1214.5961 C943,1214.5961 961,1214.5961 961,1204.5961 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="178" x="971.5" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="978.5" y="113.4818">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="178" x="971.5" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="978.5" y="1197.4941">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="70" x="1163.5" y="91.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1170.5" y="113.4818">Cleanup</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="70" x="1163.5" y="1175.5282"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1170.5" y="1197.4941">Cleanup</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1247.5" y="125.4818">Destination</text><ellipse cx="1289" cy="53.5158" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1289,61.5158 L1289,88.5158 M1276,69.5158 L1302,69.5158 M1289,88.5158 L1276,103.5158 M1289,88.5158 L1302,103.5158 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1247.5" y="1190.4941">Destination</text><ellipse cx="1289" cy="1204.5961" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1289,1212.5961 L1289,1239.5961 M1276,1220.5961 L1302,1220.5961 M1289,1239.5961 L1276,1254.5961 M1289,1239.5961 L1302,1254.5961 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="223.5301" style="stroke:#A80036;stroke-width:1.0;" width="10" x="241.5" y="202.9958"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="151.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="246.5" y="247.7018"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="204.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="389.5" y="473.2319"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="133.118" style="stroke:#A80036;stroke-width:1.0;" width="10" x="394.5" y="517.9379"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="442.7662" style="stroke:#A80036;stroke-width:1.0;" width="10" x="538.5" y="724.762"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="183.5301" style="stroke:#A80036;stroke-width:1.0;" width="10" x="543.5" y="769.468"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="151.8241" style="stroke:#A80036;stroke-width:1.0;" width="10" x="543.5" y="999.7041"/><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="234.5" y1="163.2898" y2="167.2898"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="75.5" x2="245.5" y1="163.2898" y2="163.2898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="82.5" y="157.4808">onChange</text><line style="stroke:#A80036;stroke-width:1.0;" x1="246.5" x2="293.5" y1="189.9958" y2="189.9958"/><line style="stroke:#A80036;stroke-width:1.0;" x1="293.5" x2="293.5" y1="189.9958" y2="202.9958"/><line style="stroke:#A80036;stroke-width:1.0;" x1="252.5" x2="293.5" y1="202.9958" y2="202.9958"/><polygon fill="#A80036" points="262.5,198.9958,252.5,202.9958,262.5,206.9958,258.5,202.9958" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="258.5" y="184.1868">examine</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="251.5" x2="298.5" y1="234.7018" y2="234.7018"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="298.5" x2="298.5" y1="234.7018" y2="247.7018"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="257.5" x2="298.5" y1="247.7018" y2="247.7018"/><line style="stroke:#A80036;stroke-width:1.0;" x1="257.5" x2="267.5" y1="247.7018" y2="251.7018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="263.5" y="228.8928">examineSource</text><polygon fill="#A80036" points="884.5,280.4078,894.5,284.4078,884.5,288.4078,888.5,284.4078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="256.5" x2="890.5" y1="284.4078" y2="284.4078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="263.5" y="278.5988">add source items</text><polygon fill="#A80036" points="884.5,312.1138,894.5,316.1138,884.5,320.1138,888.5,316.1138" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="256.5" x2="890.5" y1="316.1138" y2="316.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="263.5" y="310.3048">add source entries</text><polygon fill="#A80036" points="884.5,343.8199,894.5,347.8199,884.5,351.8199,888.5,347.8199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="256.5" x2="890.5" y1="347.8199" y2="347.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="263.5" y="342.0109">mark source as examined</text><line style="stroke:#A80036;stroke-width:1.0;" x1="392.5" x2="382.5" y1="379.5259" y2="383.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="256.5" x2="393.5" y1="379.5259" y2="379.5259"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="263.5" y="373.7169">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="256.5" x2="298.5" y1="398.5259" y2="398.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="298.5" x2="298.5" y1="398.5259" y2="411.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="251.5" x2="298.5" y1="411.5259" y2="411.5259"/><line style="stroke:#A80036;stroke-width:1.0;" x1="251.5" x2="261.5" y1="411.5259" y2="415.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="251.5" x2="293.5" y1="425.5259" y2="425.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="293.5" x2="293.5" y1="425.5259" y2="438.5259"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="293.5" y1="438.5259" y2="438.5259"/><polygon fill="#A80036" points="256.5,434.5259,246.5,438.5259,256.5,442.5259,252.5,438.5259" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="394.5" x2="441.5" y1="460.2319" y2="460.2319"/><line style="stroke:#A80036;stroke-width:1.0;" x1="441.5" x2="441.5" y1="460.2319" y2="473.2319"/><line style="stroke:#A80036;stroke-width:1.0;" x1="400.5" x2="441.5" y1="473.2319" y2="473.2319"/><polygon fill="#A80036" points="410.5,469.2319,400.5,473.2319,410.5,477.2319,406.5,473.2319" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="406.5" y="454.4229">aggregate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="446.5" y1="504.9379" y2="504.9379"/><line style="stroke:#A80036;stroke-width:1.0;" x1="446.5" x2="446.5" y1="504.9379" y2="517.9379"/><line style="stroke:#A80036;stroke-width:1.0;" x1="405.5" x2="446.5" y1="517.9379" y2="517.9379"/><polygon fill="#A80036" points="415.5,513.9379,405.5,517.9379,415.5,521.9379,411.5,517.9379" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="411.5" y="499.1289">add source item</text><polygon fill="#A80036" points="884.5,550.6439,894.5,554.6439,884.5,558.6439,888.5,554.6439" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="404.5" x2="890.5" y1="554.6439" y2="554.6439"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="411.5" y="548.8349">mark source_item as aggregated</text><line style="stroke:#A80036;stroke-width:1.0;" x1="404.5" x2="446.5" y1="586.3499" y2="586.3499"/><line style="stroke:#A80036;stroke-width:1.0;" x1="446.5" x2="446.5" y1="586.3499" y2="599.3499"/><line style="stroke:#A80036;stroke-width:1.0;" x1="405.5" x2="446.5" y1="599.3499" y2="599.3499"/><polygon fill="#A80036" points="415.5,595.3499,405.5,599.3499,415.5,603.3499,411.5,599.3499" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="411.5" y="580.5409">closeOldAggregates</text><line style="stroke:#A80036;stroke-width:1.0;" x1="541.5" x2="531.5" y1="631.056" y2="635.056"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="404.5" x2="542.5" y1="631.056" y2="631.056"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="411.5" y="625.247">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="404.5" x2="446.5" y1="650.056" y2="650.056"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="446.5" y1="650.056" y2="663.056"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="399.5" x2="446.5" y1="663.056" y2="663.056"/><polygon fill="#A80036" points="409.5,659.056,399.5,663.056,409.5,667.056,405.5,663.056" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="399.5" x2="441.5" y1="677.056" y2="677.056"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="441.5" x2="441.5" y1="677.056" y2="690.056"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="394.5" x2="441.5" y1="690.056" y2="690.056"/><polygon fill="#A80036" points="404.5,686.056,394.5,690.056,404.5,694.056,400.5,690.056" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="543.5" x2="590.5" y1="711.762" y2="711.762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="590.5" x2="590.5" y1="711.762" y2="724.762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549.5" x2="590.5" y1="724.762" y2="724.762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549.5" x2="559.5" y1="724.762" y2="728.762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="555.5" y="705.953">forward</text><line style="stroke:#A80036;stroke-width:1.0;" x1="548.5" x2="595.5" y1="756.468" y2="756.468"/><line style="stroke:#A80036;stroke-width:1.0;" x1="595.5" x2="595.5" y1="756.468" y2="769.468"/><line style="stroke:#A80036;stroke-width:1.0;" x1="554.5" x2="595.5" y1="769.468" y2="769.468"/><line style="stroke:#A80036;stroke-width:1.0;" x1="554.5" x2="564.5" y1="769.468" y2="773.468"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="560.5" y="750.659">forwardAggregate</text><polygon fill="#A80036" points="931,802.174,941,806.174,931,810.174,935,806.174" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="937" y1="806.174" y2="806.174"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="560.5" y="800.365">read</text><polygon fill="#A80036" points="1050.5,833.88,1060.5,837.88,1050.5,841.88,1054.5,837.88" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="1056.5" y1="837.88" y2="837.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="560.5" y="832.071">write</text><polygon fill="#A80036" points="1277,865.586,1287,869.586,1277,873.586,1281,869.586" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1062.5" x2="1283" y1="869.586" y2="869.586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1069.5" y="863.777">handle</text><polygon fill="#A80036" points="884.5,897.2921,894.5,901.2921,884.5,905.2921,888.5,901.2921" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="890.5" y1="901.2921" y2="901.2921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="560.5" y="895.4831">record 'forward_aggregate'</text><polygon fill="#A80036" points="884.5,928.9981,894.5,932.9981,884.5,936.9981,888.5,932.9981" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="890.5" y1="932.9981" y2="932.9981"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="560.5" y="927.1891">record 'aggregate' forwarded</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="553.5" x2="595.5" y1="951.9981" y2="951.9981"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="595.5" x2="595.5" y1="951.9981" y2="964.9981"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="548.5" x2="595.5" y1="964.9981" y2="964.9981"/><line style="stroke:#A80036;stroke-width:1.0;" x1="548.5" x2="558.5" y1="964.9981" y2="968.9981"/><line style="stroke:#A80036;stroke-width:1.0;" x1="548.5" x2="595.5" y1="986.7041" y2="986.7041"/><line style="stroke:#A80036;stroke-width:1.0;" x1="595.5" x2="595.5" y1="986.7041" y2="999.7041"/><line style="stroke:#A80036;stroke-width:1.0;" x1="554.5" x2="595.5" y1="999.7041" y2="999.7041"/><polygon fill="#A80036" points="564.5,995.7041,554.5,999.7041,564.5,1003.7041,560.5,999.7041" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="560.5" y="980.8951">deleteAggregate</text><polygon fill="#A80036" points="884.5,1032.4101,894.5,1036.4101,884.5,1040.4101,888.5,1036.4101" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="890.5" y1="1036.4101" y2="1036.4101"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="560.5" y="1030.6011">delete 'forward_aggregate' for complete aggregate id</text><polygon fill="#A80036" points="884.5,1064.1161,894.5,1068.1161,884.5,1072.1161,888.5,1068.1161" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="890.5" y1="1068.1161" y2="1068.1161"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="560.5" y="1062.3071">delete 'aggregate_item' for complete aggregate id</text><polygon fill="#A80036" points="884.5,1095.8221,894.5,1099.8221,884.5,1103.8221,888.5,1099.8221" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="890.5" y1="1099.8221" y2="1099.8221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="560.5" y="1094.0131">delete 'aggregate' for complete aggregate id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1198.5" x2="1188.5" y1="1131.5282" y2="1135.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="553.5" x2="1199.5" y1="1131.5282" y2="1131.5282"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="560.5" y="1125.7192">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="553.5" x2="595.5" y1="1150.5282" y2="1150.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="595.5" x2="595.5" y1="1150.5282" y2="1163.5282"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="548.5" x2="595.5" y1="1163.5282" y2="1163.5282"/><polygon fill="#A80036" points="558.5,1159.5282,548.5,1163.5282,558.5,1167.5282,554.5,1163.5282" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1259a5777ea7f1c9ccae82c969bdd183]
@startuml

title Aggregate and Forward Data

participant ProxyRepoSources
participant ProxyRepoSourceEntries
participant Aggregator
participant AggregateForwarder
database db
database repo
participant ForwardStreamHandlers
participant Cleanup
actor Destination

ProxyRepoSources - -// ProxyRepoSourceEntries: onChange
ProxyRepoSourceEntries -> ProxyRepoSourceEntries++: examine
ProxyRepoSourceEntries - -// ProxyRepoSourceEntries++: examineSource
ProxyRepoSourceEntries -> db: add source items
ProxyRepoSourceEntries -> db: add source entries
ProxyRepoSourceEntries -> db: mark source as examined

ProxyRepoSourceEntries - -// Aggregator: onChange

return
return

Aggregator -> Aggregator++: aggregate
Aggregator -> Aggregator++: add source item
Aggregator -> db: mark source_item as aggregated
Aggregator -> Aggregator: closeOldAggregates
Aggregator - -// AggregateForwarder: onChange

return
return

AggregateForwarder -// AggregateForwarder++: forward
AggregateForwarder -// AggregateForwarder++: forwardAggregate
AggregateForwarder -> repo: read
AggregateForwarder -> ForwardStreamHandlers: write
ForwardStreamHandlers - -> Destination: handle
AggregateForwarder -> db: record 'forward_aggregate'

AggregateForwarder -> db: record 'aggregate' forwarded
return

AggregateForwarder -> AggregateForwarder++: deleteAggregate
AggregateForwarder -> db: delete 'forward_aggregate' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate_item' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate' for complete aggregate id
AggregateForwarder - -// Cleanup: onChange
return

@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>