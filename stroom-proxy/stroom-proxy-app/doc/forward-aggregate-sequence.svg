<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1192px" preserveAspectRatio="none" style="width:1381px;height:1192px;" version="1.1" viewBox="0 0 1381 1192" width="1381px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o8i8rfuta1hz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="257" x="564.25" y="28.708">Aggregate and Forward Data</text><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="210.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="253.5" y="191.5156"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="258.5" y="233.6484"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="194.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="405.5" y="446.3125"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="125.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="410.5" y="488.4453"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="414.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="562.5" y="684.9766"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="170.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="567.5" y="727.1094"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="567.5" y="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="79" x2="79" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="258" x2="258" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="410" x2="410" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="567" x2="567" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="941.5" x2="941.5" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="988.5" x2="988.5" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1108.5" x2="1108.5" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1247.5" x2="1247.5" y1="123.25" y2="1108.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1337.5" x2="1337.5" y1="123.25" y2="1108.4375"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="145" x="5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="12" y="107.9482">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="145" x="5" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="12" y="1127.4326">ProxyRepoSources</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="185" x="164" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="171" y="107.9482">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="185" x="164" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="171" y="1127.4326">ProxyRepoSourceEntries</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="91" x="363" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="370" y="107.9482">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="91" x="363" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="370" y="1127.4326">Aggregator</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="155" x="488" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="495" y="107.9482">AggregateForwarder</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="155" x="488" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="495" y="1127.4326">AggregateForwarder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="929.5" y="119.9482">db</text><path d="M923.5,70.9531 C923.5,60.9531 941.5,60.9531 941.5,60.9531 C941.5,60.9531 959.5,60.9531 959.5,70.9531 L959.5,96.9531 C959.5,106.9531 941.5,106.9531 941.5,106.9531 C941.5,106.9531 923.5,106.9531 923.5,96.9531 L923.5,70.9531 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M923.5,70.9531 C923.5,80.9531 941.5,80.9531 941.5,80.9531 C941.5,80.9531 959.5,80.9531 959.5,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="929.5" y="1120.4326">db</text><path d="M923.5,1133.7344 C923.5,1123.7344 941.5,1123.7344 941.5,1123.7344 C941.5,1123.7344 959.5,1123.7344 959.5,1133.7344 L959.5,1159.7344 C959.5,1169.7344 941.5,1169.7344 941.5,1169.7344 C941.5,1169.7344 923.5,1169.7344 923.5,1159.7344 L923.5,1133.7344 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M923.5,1133.7344 C923.5,1143.7344 941.5,1143.7344 941.5,1143.7344 C941.5,1143.7344 959.5,1143.7344 959.5,1133.7344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="969.5" y="119.9482">repo</text><path d="M970.5,70.9531 C970.5,60.9531 988.5,60.9531 988.5,60.9531 C988.5,60.9531 1006.5,60.9531 1006.5,70.9531 L1006.5,96.9531 C1006.5,106.9531 988.5,106.9531 988.5,106.9531 C988.5,106.9531 970.5,106.9531 970.5,96.9531 L970.5,70.9531 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M970.5,70.9531 C970.5,80.9531 988.5,80.9531 988.5,80.9531 C988.5,80.9531 1006.5,80.9531 1006.5,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="969.5" y="1120.4326">repo</text><path d="M970.5,1133.7344 C970.5,1123.7344 988.5,1123.7344 988.5,1123.7344 C988.5,1123.7344 1006.5,1123.7344 1006.5,1133.7344 L1006.5,1159.7344 C1006.5,1169.7344 988.5,1169.7344 988.5,1169.7344 C988.5,1169.7344 970.5,1169.7344 970.5,1159.7344 L970.5,1133.7344 " fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" style="stroke:#000000;stroke-width:1.5;"/><path d="M970.5,1133.7344 C970.5,1143.7344 988.5,1143.7344 988.5,1143.7344 C988.5,1143.7344 1006.5,1143.7344 1006.5,1133.7344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="179" x="1017.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1024.5" y="107.9482">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="179" x="1017.5" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1024.5" y="1127.4326">ForwardStreamHandlers</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1210.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1217.5" y="107.9482">Cleanup</text><rect fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1210.5" y="1107.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1217.5" y="1127.4326">Cleanup</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1295.5" y="119.9482">Destination</text><ellipse cx="1338" cy="49.9531" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1338,57.9531 L1338,84.9531 M1325,65.9531 L1351,65.9531 M1338,84.9531 L1325,99.9531 M1338,84.9531 L1351,99.9531 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1295.5" y="1120.4326">Destination</text><ellipse cx="1338" cy="1133.7344" fill="#FEFECE" filter="url(#f1o8i8rfuta1hz)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1338,1141.7344 L1338,1168.7344 M1325,1149.7344 L1351,1149.7344 M1338,1168.7344 L1325,1183.7344 M1338,1168.7344 L1351,1183.7344 " fill="none" filter="url(#f1o8i8rfuta1hz)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="210.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="253.5" y="191.5156"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="258.5" y="233.6484"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="194.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="405.5" y="446.3125"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="125.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="410.5" y="488.4453"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="414.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="562.5" y="684.9766"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="170.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="567.5" y="727.1094"/><rect fill="#FFFFFF" filter="url(#f1o8i8rfuta1hz)" height="141.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="567.5" y="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="256.5" x2="246.5" y1="154.3828" y2="158.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79.5" x2="257.5" y1="154.3828" y2="154.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="86.5" y="149.3169">onChange</text><line style="stroke:#A80036;stroke-width:1.0;" x1="258.5" x2="305.5" y1="178.5156" y2="178.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="305.5" x2="305.5" y1="178.5156" y2="191.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="264.5" x2="305.5" y1="191.5156" y2="191.5156"/><polygon fill="#A80036" points="274.5,187.5156,264.5,191.5156,274.5,195.5156,270.5,191.5156" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="270.5" y="173.4497">examine</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="263.5" x2="310.5" y1="220.6484" y2="220.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="310.5" x2="310.5" y1="220.6484" y2="233.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="269.5" x2="310.5" y1="233.6484" y2="233.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="269.5" x2="279.5" y1="233.6484" y2="237.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="275.5" y="215.5825">examineSource</text><polygon fill="#A80036" points="929.5,263.7813,939.5,267.7813,929.5,271.7813,933.5,267.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="268.5" x2="935.5" y1="267.7813" y2="267.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="275.5" y="262.7153">add source items</text><polygon fill="#A80036" points="929.5,292.9141,939.5,296.9141,929.5,300.9141,933.5,296.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="268.5" x2="935.5" y1="296.9141" y2="296.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="275.5" y="291.8481">add source entries</text><polygon fill="#A80036" points="929.5,322.0469,939.5,326.0469,929.5,330.0469,933.5,326.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="268.5" x2="935.5" y1="326.0469" y2="326.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="275.5" y="320.981">mark source as examined</text><line style="stroke:#A80036;stroke-width:1.0;" x1="408.5" x2="398.5" y1="355.1797" y2="359.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="268.5" x2="409.5" y1="355.1797" y2="355.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="275.5" y="350.1138">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="268.5" x2="310.5" y1="374.1797" y2="374.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="310.5" x2="310.5" y1="374.1797" y2="387.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="263.5" x2="310.5" y1="387.1797" y2="387.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="263.5" x2="273.5" y1="387.1797" y2="391.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="263.5" x2="305.5" y1="401.1797" y2="401.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="305.5" x2="305.5" y1="401.1797" y2="414.1797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="258.5" x2="305.5" y1="414.1797" y2="414.1797"/><polygon fill="#A80036" points="268.5,410.1797,258.5,414.1797,268.5,418.1797,264.5,414.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="410.5" x2="457.5" y1="433.3125" y2="433.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="457.5" y1="433.3125" y2="446.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="416.5" x2="457.5" y1="446.3125" y2="446.3125"/><polygon fill="#A80036" points="426.5,442.3125,416.5,446.3125,426.5,450.3125,422.5,446.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="422.5" y="428.2466">aggregate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="415.5" x2="462.5" y1="475.4453" y2="475.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="462.5" y1="475.4453" y2="488.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="421.5" x2="462.5" y1="488.4453" y2="488.4453"/><polygon fill="#A80036" points="431.5,484.4453,421.5,488.4453,431.5,492.4453,427.5,488.4453" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="427.5" y="470.3794">add source item</text><polygon fill="#A80036" points="929.5,518.5781,939.5,522.5781,929.5,526.5781,933.5,522.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="420.5" x2="935.5" y1="522.5781" y2="522.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="427.5" y="517.5122">mark source_item as aggregated</text><line style="stroke:#A80036;stroke-width:1.0;" x1="420.5" x2="462.5" y1="551.7109" y2="551.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="462.5" x2="462.5" y1="551.7109" y2="564.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="421.5" x2="462.5" y1="564.7109" y2="564.7109"/><polygon fill="#A80036" points="431.5,560.7109,421.5,564.7109,431.5,568.7109,427.5,564.7109" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="427.5" y="546.645">closeOldAggregates</text><line style="stroke:#A80036;stroke-width:1.0;" x1="565.5" x2="555.5" y1="593.8438" y2="597.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="420.5" x2="566.5" y1="593.8438" y2="593.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="427.5" y="588.7778">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="420.5" x2="462.5" y1="612.8438" y2="612.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="462.5" x2="462.5" y1="612.8438" y2="625.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="415.5" x2="462.5" y1="625.8438" y2="625.8438"/><polygon fill="#A80036" points="425.5,621.8438,415.5,625.8438,425.5,629.8438,421.5,625.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="415.5" x2="457.5" y1="639.8438" y2="639.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="457.5" y1="639.8438" y2="652.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="410.5" x2="457.5" y1="652.8438" y2="652.8438"/><polygon fill="#A80036" points="420.5,648.8438,410.5,652.8438,420.5,656.8438,416.5,652.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="567.5" x2="614.5" y1="671.9766" y2="671.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="614.5" x2="614.5" y1="671.9766" y2="684.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="573.5" x2="614.5" y1="684.9766" y2="684.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="573.5" x2="583.5" y1="684.9766" y2="688.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="579.5" y="666.9106">forward</text><line style="stroke:#A80036;stroke-width:1.0;" x1="572.5" x2="619.5" y1="714.1094" y2="714.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619.5" x2="619.5" y1="714.1094" y2="727.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="619.5" y1="727.1094" y2="727.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="588.5" y1="727.1094" y2="731.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="584.5" y="709.0435">forwardAggregate</text><polygon fill="#A80036" points="976.5,757.2422,986.5,761.2422,976.5,765.2422,980.5,761.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="982.5" y1="761.2422" y2="761.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="584.5" y="756.1763">read</text><polygon fill="#A80036" points="1097,786.375,1107,790.375,1097,794.375,1101,790.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="1103" y1="790.375" y2="790.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="584.5" y="785.3091">write</text><polygon fill="#A80036" points="1326,815.5078,1336,819.5078,1326,823.5078,1330,819.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1109" x2="1332" y1="819.5078" y2="819.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1116" y="814.4419">handle</text><polygon fill="#A80036" points="929.5,844.6406,939.5,848.6406,929.5,852.6406,933.5,848.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="935.5" y1="848.6406" y2="848.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="584.5" y="843.5747">record 'forward_aggregate'</text><polygon fill="#A80036" points="929.5,873.7734,939.5,877.7734,929.5,881.7734,933.5,877.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="935.5" y1="877.7734" y2="877.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="584.5" y="872.7075">record 'aggregate' forwarded</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="577.5" x2="619.5" y1="896.7734" y2="896.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="619.5" x2="619.5" y1="896.7734" y2="909.7734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572.5" x2="619.5" y1="909.7734" y2="909.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="572.5" x2="582.5" y1="909.7734" y2="913.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="572.5" x2="619.5" y1="928.9063" y2="928.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619.5" x2="619.5" y1="928.9063" y2="941.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="619.5" y1="941.9063" y2="941.9063"/><polygon fill="#A80036" points="588.5,937.9063,578.5,941.9063,588.5,945.9063,584.5,941.9063" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="584.5" y="923.8403">deleteAggregate</text><polygon fill="#A80036" points="929.5,972.0391,939.5,976.0391,929.5,980.0391,933.5,976.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="935.5" y1="976.0391" y2="976.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="584.5" y="970.9731">delete 'forward_aggregate' for complete aggregate id</text><polygon fill="#A80036" points="929.5,1001.1719,939.5,1005.1719,929.5,1009.1719,933.5,1005.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="935.5" y1="1005.1719" y2="1005.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="584.5" y="1000.106">delete 'aggregate_item' for complete aggregate id</text><polygon fill="#A80036" points="929.5,1030.3047,939.5,1034.3047,929.5,1038.3047,933.5,1034.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="577.5" x2="935.5" y1="1034.3047" y2="1034.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="584.5" y="1029.2388">delete 'aggregate' for complete aggregate id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1246" x2="1236" y1="1063.4375" y2="1067.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="577.5" x2="1247" y1="1063.4375" y2="1063.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="584.5" y="1058.3716">onChange</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="577.5" x2="619.5" y1="1082.4375" y2="1082.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="619.5" x2="619.5" y1="1082.4375" y2="1095.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572.5" x2="619.5" y1="1095.4375" y2="1095.4375"/><polygon fill="#A80036" points="582.5,1091.4375,572.5,1095.4375,582.5,1099.4375,578.5,1095.4375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2608f2471cede32dd465798a0a2cf619]
@startuml

title Aggregate and Forward Data

participant ProxyRepoSources
participant ProxyRepoSourceEntries
participant Aggregator
participant AggregateForwarder
database db
database repo
participant ForwardStreamHandlers
participant Cleanup
actor Destination

ProxyRepoSources - -// ProxyRepoSourceEntries: onChange
ProxyRepoSourceEntries -> ProxyRepoSourceEntries++: examine
ProxyRepoSourceEntries - -// ProxyRepoSourceEntries++: examineSource
ProxyRepoSourceEntries -> db: add source items
ProxyRepoSourceEntries -> db: add source entries
ProxyRepoSourceEntries -> db: mark source as examined

ProxyRepoSourceEntries - -// Aggregator: onChange

return
return

Aggregator -> Aggregator++: aggregate
Aggregator -> Aggregator++: add source item
Aggregator -> db: mark source_item as aggregated
Aggregator -> Aggregator: closeOldAggregates
Aggregator - -// AggregateForwarder: onChange

return
return

AggregateForwarder -// AggregateForwarder++: forward
AggregateForwarder -// AggregateForwarder++: forwardAggregate
AggregateForwarder -> repo: read
AggregateForwarder -> ForwardStreamHandlers: write
ForwardStreamHandlers - -> Destination: handle
AggregateForwarder -> db: record 'forward_aggregate'

AggregateForwarder -> db: record 'aggregate' forwarded
return

AggregateForwarder -> AggregateForwarder++: deleteAggregate
AggregateForwarder -> db: delete 'forward_aggregate' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate_item' for complete aggregate id
AggregateForwarder -> db: delete 'aggregate' for complete aggregate id
AggregateForwarder - -// Cleanup: onChange
return

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>