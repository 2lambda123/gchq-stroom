<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
<pipeline> 
  <elements> 
    <add> 
      <element> 
        <id>combinedParser</id> 
        <type>CombinedParser</type> 
      </element> 
      <element> 
        <id>readRecordCountFilter</id> 
        <type>RecordCountFilter</type> 
      </element> 
      <element> 
        <id>splitFilter</id> 
        <type>SplitFilter</type> 
      </element> 
      <element> 
        <id>translationFilter</id> 
        <type>XSLTFilter</type> 
      </element> 
      <element> 
        <id>decorationFilter</id> 
        <type>XSLTFilter</type> 
      </element> 
      <element> 
        <id>flattenFilter</id> 
        <type>XSLTFilter</type> 
      </element>
      <element> 
        <id>schemaSplitFilter</id> 
        <type>SplitFilter</type> 
      </element> 
      <element> 
        <id>schemaFilter</id> 
        <type>SchemaFilter</type> 
      </element> 
      <element> 
        <id>recordOutputFilter</id> 
        <type>RecordOutputFilter</type> 
      </element> 
      <element> 
        <id>writeRecordCountFilter</id> 
        <type>RecordCountFilter</type> 
      </element> 
      <element> 
        <id>textWriter</id> 
        <type>TextWriter</type> 
      </element> 
      <element> 
        <id>rollingFileAppender</id> 
        <type>RollingFileAppender</type> 
      </element> 
    </add> 
  </elements> 
  <properties> 
    <add> 
      <property> 
        <element>readRecordCountFilter</element> 
        <name>countRead</name> 
        <value> 
          <boolean>true</boolean> 
        </value> 
      </property> 
      <property> 
        <element>splitFilter</element> 
        <name>splitDepth</name> 
        <value> 
          <integer>1</integer> 
        </value> 
      </property> 
      <property> 
        <element>splitFilter</element> 
        <name>splitCount</name> 
        <value> 
          <integer>100</integer> 
        </value> 
      </property> 
      <property> 
        <element>schemaSplitFilter</element> 
        <name>splitCount</name> 
        <value> 
          <integer>1</integer> 
        </value> 
      </property> 
      <property> 
        <element>schemaFilter</element> 
        <name>schemaGroup</name> 
        <value> 
          <string>EVENTS</string> 
        </value> 
      </property> 
      <property> 
        <element>writeRecordCountFilter</element> 
        <name>countRead</name> 
        <value> 
          <boolean>false</boolean> 
        </value> 
      </property> 
      <property>
          <element>rollingFileAppender</element>
          <name>outputPaths</name>
          <value>
              <string>${stroom.temp}</string>
          </value>
      </property>
      <property>
          <element>rollingFileAppender</element>
          <name>fileName</name>
          <value>
              <string>TestRollingFileAppender.txt.lock</string>
          </value>
      </property>
      <property>
          <element>rollingFileAppender</element>
          <name>rolledFileName</name>
          <value>
              <string>TestRollingFileAppender.txt</string>
          </value>
      </property>
      <property>
          <element>rollingFileAppender</element>
          <name>frequency</name>
          <value>
              <integer>1</integer> 
          </value>
      </property>
    </add> 
  </properties> 
  <links> 
    <add> 
      <link> 
        <from>combinedParser</from> 
        <to>readRecordCountFilter</to> 
      </link> 
      <link> 
        <from>readRecordCountFilter</from> 
        <to>splitFilter</to> 
      </link> 
      <link> 
        <from>splitFilter</from> 
        <to>translationFilter</to> 
      </link> 
      <link> 
        <from>translationFilter</from> 
        <to>decorationFilter</to> 
      </link> 
      
      
<!--       <link>  -->
<!--         <from>decorationFilter</from>  -->
<!--         <to>schemaSplitFilter</to>  -->
<!--       </link> -->
<!--       <link>  -->
<!--         <from>schemaSplitFilter</from>  -->
<!--         <to>schemaFilter</to>  -->
<!--       </link>  -->
      
      <link> 
        <from>decorationFilter</from> 
        <to>schemaFilter</to> 
      </link>       
      
      <link> 
        <from>schemaFilter</from> 
        <to>recordOutputFilter</to> 
      </link> 
      <link> 
        <from>recordOutputFilter</from> 
        <to>writeRecordCountFilter</to> 
      </link> 
      <link> 
        <from>writeRecordCountFilter</from> 
        <to>textWriter</to> 
      </link> 
      <link> 
        <from>textWriter</from> 
        <to>rollingFileAppender</to> 
      </link> 
    </add> 
  </links> 
</pipeline>
