server:
  type: simple
  applicationContextPath: /
  adminContextPath: /admin
  connector:
    type: http
    port: 8080
    
  requestLog:
    appenders:
    - type: file
      currentLogFilename: logs/access/access.log
      threshold: ALL
      queueSize: 256
      discardingThreshold: 0
      archive: true
      archivedLogFilenamePattern: logs/access/access-%d{yyyy-MM-dd'T'HH:mm}.log
      archivedFileCount: 100
      timeZone: UTC
      logFormat: "%-5p [%d{\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",UTC}] %c: %m%n%rEx"

logging:
  level: ${STROOM_LOGGING_LEVEL:- ERROR}
  loggers:
    stroom: INFO
    io.dropwizard: INFO
    org.eclipse.jetty: INFO
    org.flywaydb: INFO
    "event-logger":
      level: INFO
      additive: false
      appenders:
      - type: file
        currentLogFilename: logs/events/event.log
        threshold: ALL
        queueSize: 256
        discardingThreshold: 0
        archive: true
        archivedLogFilenamePattern: logs/events/event-%d{yyyy-MM-dd'T'HH:mm}.log
        archivedFileCount: 100
        timeZone: UTC
        logFormat: "%msg%n"

  appenders:
  - type: console
    logFormat: "%-6level [%d{\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",UTC}] [%t] %logger{5} - %X{code} %msg %n"
    timeZone: UTC
  - type: file
    currentLogFilename: logs/app/app.log
    threshold: ALL
    queueSize: 256
    discardingThreshold: 0
    archive: true
    archivedLogFilenamePattern: logs/app/app-%d{yyyy-MM-dd'T'HH:mm}.log
    archivedFileCount: 100
    timeZone: UTC
    logFormat: "%-6level [%d{\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",UTC}] [%t] %logger - %X{code} %msg %n"
